local TextChatService = game:GetService("TextChatService")
local Players = game:GetService("Players")
local channel = TextChatService.TextChannels.RBXGeneral
local Player = Players.LocalPlayer

local lastMessageTime = 0
local MESSAGE_COOLDOWN = 2

channel:SendAsync("ğŸŒŸStanHubBotã§ã™ã€‚é–‹ç™ºè€…:Hackv2,BGHackersğŸŒŸ")

-- ===== ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼é–¢é€£æ©Ÿèƒ½ 5ã¤ =====
local function GetPlayerInfo(player)
    return {
        Name = player.Name,
        DisplayName = player.DisplayName,
        Position = player.Character and player.Character.PrimaryPart and player.Character.PrimaryPart.Position or "ä¸æ˜",
        Health = player.Character and player.Character:FindFirstChild("Humanoid") and player.Character.Humanoid.Health or "ä¸æ˜",
        Team = player.Team and player.Team.Name or "ãªã—"
    }
end

-- ===== ã‚³ãƒãƒ³ãƒ‰å®šç¾©ï¼ˆ20ç¨®é¡ä»¥ä¸Šï¼‰ =====
local Commands = {}

Commands["!help"] = function()
    channel:SendAsync("ä½¿ç”¨å¯èƒ½ã‚³ãƒãƒ³ãƒ‰: !help, !time, !math, !me, !pos, !hp, !team, !players, !whois, !random, !shout, !whisper, !say, !joke, !weather, !roll, !flip, !emoji, !color, !mute, !unmute")
end

Commands["!time"] = function()
    channel:SendAsync("ç¾åœ¨ã®ã‚µãƒ¼ãƒãƒ¼æ™‚åˆ»: "..os.date("%H:%M:%S"))
end

Commands["!math"] = function(msg)
    local expr = msg:match("!math (.+)")
    if expr then
        local success, result = pcall(function() return load("return "..expr)() end)
        if success then
            channel:SendAsync("è¨ˆç®—çµæœ: "..tostring(result))
        else
            channel:SendAsync("è¨ˆç®—ã‚¨ãƒ©ãƒ¼ã§ã™")
        end
    end
end

Commands["!me"] = function()
    channel:SendAsync("ã‚ãªãŸã®åå‰: "..Player.Name.." è¡¨ç¤ºå: "..Player.DisplayName)
end

Commands["!pos"] = function()
    local pos = Player.Character and Player.Character.PrimaryPart and Player.Character.PrimaryPart.Position or "ä¸æ˜"
    channel:SendAsync("ã‚ãªãŸã®åº§æ¨™: "..tostring(pos))
end

Commands["!hp"] = function()
    local hp = Player.Character and Player.Character:FindFirstChild("Humanoid") and Player.Character.Humanoid.Health or "ä¸æ˜"
    channel:SendAsync("ã‚ãªãŸã®HP: "..tostring(hp))
end

Commands["!team"] = function()
    local teamName = Player.Team and Player.Team.Name or "ãªã—"
    channel:SendAsync("ã‚ãªãŸã®ãƒãƒ¼ãƒ : "..teamName)
end

Commands["!players"] = function()
    local list = ""
    for _, p in pairs(Players:GetPlayers()) do
        list = list..p.Name..", "
    end
    channel:SendAsync("ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ä¸€è¦§: "..list)
end

Commands["!whois"] = function(msg)
    local name = msg:match("!whois (.+)")
    if name then
        local target = Players:FindFirstChild(name)
        if target then
            local info = GetPlayerInfo(target)
            channel:SendAsync("æƒ…å ±: åå‰:"..info.Name.." è¡¨ç¤ºå:"..info.DisplayName.." HP:"..info.Health.." ãƒãƒ¼ãƒ :"..info.Team.." åº§æ¨™:"..tostring(info.Position))
        else
            channel:SendAsync("ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“")
        end
    end
end

Commands["!random"] = function()
    channel:SendAsync("ãƒ©ãƒ³ãƒ€ãƒ æ•°å­—: "..math.random(1,100))
end

Commands["!shout"] = function(msg)
    local text = msg:match("!shout (.+)")
    if text then
        channel:SendAsync("ğŸ“¢ "..text:upper())
    end
end

Commands["!whisper"] = function(msg)
    local text, targetName = msg:match("!whisper (.+) (.+)")
    if text and targetName then
        local target = Players:FindFirstChild(targetName)
        if target then
            channel:SendAsync("ğŸ¤« (to "..targetName..") "..text)
        else
            channel:SendAsync("ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“")
        end
    end
end

Commands["!say"] = function(msg)
    local text = msg:match("!say (.+)")
    if text then
        channel:SendAsync(text)
    end
end

Commands["!joke"] = function()
    local jokes = {
        "çŒ«ãŒãƒ‘ã‚½ã‚³ãƒ³ã§ä½•ã‚’ã™ã‚‹ï¼Ÿãƒ‹ãƒ£ãƒ¼ãƒˆãƒ–ãƒƒã‚¯ï¼",
        "ãŠå¯¿å¸ãŒå¥½ããªæ•°å­¦è€…ã¯ï¼Ÿã‚·ãƒ£ãƒªãƒ»ãƒ”ã‚¿ã‚´ãƒ©ã‚¹ï¼",
        "ã‚«ã‚¨ãƒ«ãŒæœ¬ã‚’èª­ã‚€ã¨ï¼Ÿã‚±ãƒ­ã‚±ãƒ­å­¦ç¿’ï¼"
    }
    channel:SendAsync(jokes[math.random(1,#jokes)])
end

Commands["!weather"] = function()
    channel:SendAsync("ä»Šæ—¥ã®å¤©æ°—ã¯æ™´ã‚Œã§ã™â˜€ï¸ï¼ˆãƒ‡ãƒ¢ç”¨ï¼‰")
end

Commands["!roll"] = function()
    channel:SendAsync("ã‚µã‚¤ã‚³ãƒ­ã®çµæœ: "..math.random(1,6))
end

Commands["!flip"] = function()
    local res = math.random() < 0.5 and "è¡¨" or "è£"
    channel:SendAsync("ã‚³ã‚¤ãƒ³ã®çµæœ: "..res)
end

Commands["!emoji"] = function()
    local emojis = {"ğŸ˜„","ğŸ˜","ğŸ¤–","ğŸ‰","ğŸ’¥"}
    channel:SendAsync("ãƒ©ãƒ³ãƒ€ãƒ çµµæ–‡å­—: "..emojis[math.random(1,#emojis)])
end

Commands["!color"] = function()
    local colors = {"èµ¤","é’","ç·‘","é»„","ç´«"}
    channel:SendAsync("ãƒ©ãƒ³ãƒ€ãƒ è‰²: "..colors[math.random(1,#colors)])
end

Commands["!mute"] = function()
    channel:SendAsync("ãƒŸãƒ¥ãƒ¼ãƒˆæ©Ÿèƒ½ã¯ãƒ‡ãƒ¢ç”¨ã§ã™")
end

Commands["!unmute"] = function()
    channel:SendAsync("ãƒŸãƒ¥ãƒ¼ãƒˆè§£é™¤æ©Ÿèƒ½ã¯ãƒ‡ãƒ¢ç”¨ã§ã™")
end

-- ===== ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å—ä¿¡å‡¦ç† =====
TextChatService.OnIncomingMessage = function(msgObj)
    local msg = msgObj.Text
    local currentTime = os.time()
    if currentTime - lastMessageTime < MESSAGE_COOLDOWN then
        return
    end
    lastMessageTime = currentTime

    for cmd, func in pairs(Commands) do
        if msg:sub(1, #cmd) == cmd then
            func(msg)
            return
        end
    end
print("LALOL Hub Ontop!! Discord-<BGHackers")
    end
